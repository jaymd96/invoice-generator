<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice Generator</title>
  <link rel="stylesheet" href="css/app.css">

  <!-- html2pdf.js for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.2/html2pdf.bundle.min.js" defer></script>

  <!-- PyScript -->
  <script type="module" src="https://pyscript.net/releases/2024.11.1/core.js"></script>
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.11.1/core.css">
</head>
<body>
  <!-- Sidebar Navigation -->
  <nav id="sidebar">
    <div class="sidebar-header">
      <h1>Invoice Generator</h1>
      <div class="subtitle">Browser-based invoicing</div>
    </div>

    <div class="sidebar-nav">
      <button class="nav-item" data-route="#dashboard" onclick="navigate('#dashboard')">
        <span class="nav-icon">&#9633;</span> Dashboard
      </button>
      <button class="nav-item" data-route="#clients" onclick="navigate('#clients')">
        <span class="nav-icon">&#9775;</span> Clients
      </button>
      <button class="nav-item" data-route="#invoices" onclick="navigate('#invoices')">
        <span class="nav-icon">&#9993;</span> Invoices
      </button>
      <button class="nav-item" data-route="#timesheets" onclick="navigate('#timesheets')">
        <span class="nav-icon">&#9201;</span> Timesheets
      </button>
      <button class="nav-item" data-route="#settings" onclick="navigate('#settings')">
        <span class="nav-icon">&#9881;</span> Settings
      </button>
    </div>

    <div class="sidebar-footer">
      <span style="font-size: 12px; opacity: 0.6;">v2.0</span>
      <button id="dark-mode-toggle">Dark / Light</button>
    </div>
  </nav>

  <!-- Main Area -->
  <div id="main-area">
    <!-- Mobile top bar -->
    <div class="top-bar">
      <button id="sidebar-toggle">&#9776;</button>
      <span style="font-weight: 600;">Invoice Generator</span>
      <span></span>
    </div>

    <!-- Content injected by app.js -->
    <div id="main-content">
      <div style="text-align: center; padding: 60px 20px; color: var(--text-secondary);">
        <p>Loading...</p>
      </div>
    </div>
  </div>

  <!-- Python loading indicator -->
  <div id="py-loading">
    <div class="spinner"></div>
    <span>Loading Python engine...</span>
  </div>

  <!-- JS modules (order matters: storage first, then pdf, then app) -->
  <script src="js/storage.js"></script>
  <script src="js/pdf.js"></script>
  <script src="js/app.js"></script>

  <!-- PyScript: runs bridge.py which exposes Python functions to window -->
  <script type="py" src="./py/bridge.py" config="./pyscript.toml"></script>
</body>
</html>
